"use strict";$("#btn-upload-questions").on("click",function(){if($("#academicYear").val()==""||$("#subject").val()==""){alert("\u0627\u0645\u0627 \u0627\u0646\u0643 \u0644\u0645 \u062A\u0636\u064A\u0641 \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062F\u0631\u0627\u0633\u064A\u0629 \u0623\u0648 \u0627\u0646\u0643 \u0644\u0645 \u062A\u0636\u064A\u0641 \u0627\u0644\u0645\u0627\u062F\u0629")}else{var x=confirm("\u0647\u0644 \u0627\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u0631\u0641\u0639 \u0627\u0644\u0627\u0633\u0626\u0644\u0629");if(x){funUploadQuestions(0)}else{return 0}}});$("#btn-upload-questions2").on("click",function(){if($("#academicYear").val()==""||$("#subject").val()==""){alert("\u0627\u0645\u0627 \u0627\u0646\u0643 \u0644\u0645 \u062A\u0636\u064A\u0641 \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062F\u0631\u0627\u0633\u064A\u0629 \u0623\u0648 \u0627\u0646\u0643 \u0644\u0645 \u062A\u0636\u064A\u0641 \u0627\u0644\u0645\u0627\u062F\u0629")}else{var x=confirm("\u0647\u0644 \u0627\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u0631\u0641\u0639 \u0627\u0644\u0627\u0633\u0626\u0644\u0629");if(x){funUploadQuestions(1)}else{return 0}}});$("#btn-upload-questions3").on("click",function(){if($("#academicYear").val()==""||$("#subject").val()==""){alert("\u0627\u0645\u0627 \u0627\u0646\u0643 \u0644\u0645 \u062A\u0636\u064A\u0641 \u0627\u0644\u0633\u0646\u0629 \u0627\u0644\u062F\u0631\u0627\u0633\u064A\u0629 \u0623\u0648 \u0627\u0646\u0643 \u0644\u0645 \u062A\u0636\u064A\u0641 \u0627\u0644\u0645\u0627\u062F\u0629")}else{var x=confirm("\u0647\u0644 \u0627\u0646\u062A \u0645\u062A\u0623\u0643\u062F \u0645\u0646 \u0623\u0646\u0643 \u062A\u0631\u064A\u062F \u0631\u0641\u0639 \u0627\u0644\u0627\u0633\u0626\u0644\u0629");if(x){funUploadQuestions(3)}else{return 0}}});function funFilterInputs(x){var y=x.replace(/۰/g,"0").replace(/۱/g,"1").replace(/۲/g,"2").replace(/۳/g,"3").replace(/٤/g,"4").replace(/٥/g,"5").replace(/٦/g,"6").replace(/٧/g,"7").replace(/۸/g,"8").replace(/۹/g,"9").replace(/\?/g,"\u061F").replace(/\s\s/g," ");return y}function funUploadQuestions(){var para1=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var myObject={};var getEditorData=myCodeMirror.getValue().replace(/^\s*\n/gm,"");var arrayEditorData=getEditorData.split("\n");var section="";var dealingWith="";var theQuestion="";var uniqId="";funUploadQuestions1(myObject,arrayEditorData,section,dealingWith,theQuestion,uniqId);funUploadQuestions2(para1,myObject)}function funUploadQuestions0(){var myObject={};var getEditorData=myCodeMirror.getValue().replace(/^\s*\n/gm,"");var arrayEditorData=getEditorData.split("\n");var section="";var dealingWith="";var theQuestion="";var uniqId="";funUploadQuestions1(myObject,arrayEditorData,section,dealingWith,theQuestion,uniqId);return myObject}function funUploadQuestions1(myObject,arrayEditorData,section,dealingWith,theQuestion,uniqId){for(var i in arrayEditorData){if(funFilterInputs(arrayEditorData[i]).includes("@@@")){section=funFilterInputs(arrayEditorData[i].replace(/(@@@|\$translate\{+(\w|\W)+\})/g,""));dealingWith="";myObject[section]=[]}else if(funFilterInputs(arrayEditorData[i]).includes("\u061F\u061F")||funFilterInputs(arrayEditorData[i]).includes("??")){if(section!=""){dealingWith="trueOrFalse";theQuestion=funFilterInputs(arrayEditorData[i]).replace(/\$translate\{+(\w|\W)+\}/g,"");uniqId=funUniqId();myObject[section].push({question:theQuestion,answers:["\u0635\u062D","\u062E\u0637\u0623"],answer:"\u0635\u062D",note:"",type:dealingWith,historyM:[],historyH:[]});var xHistoryM=funForSortAgeM(theQuestion);var xHistoryH=funForSortAgeH(theQuestion);if(xHistoryM.length!=0){xHistoryM.forEach(function(x){myObject[section][myObject[section].length-1]["historyM"].push(x)})}if(xHistoryH.length!=0){xHistoryH.forEach(function(x){myObject[section][myObject[section].length-1]["historyH"].push(x)})}}else{alert("\u0646\u0633\u064A\u062A \u062A\u0643\u062A\u0628 \u0639\u0646\u0648\u0627\u0646 \u0641\u0649 \u0635\u062D \u0648\u063A\u0644\u0637 ".concat(i," : ").concat(section));return 0}}else if(funFilterInputs(arrayEditorData[i]).includes("#")||funFilterInputs(arrayEditorData[i]).includes("!!!")){if(section!=""){dealingWith="complete";theQuestion=funFilterInputs(arrayEditorData[i]);uniqId=funUniqId();myObject[section].push({question:theQuestion,answers:[],answer:"",note:"",type:dealingWith,historyM:[],historyH:[]});var xHistoryM=funForSortAgeM(theQuestion);var xHistoryH=funForSortAgeH(theQuestion);if(xHistoryM.length!=0){xHistoryM.forEach(function(x){myObject[section][myObject[section].length-1]["historyM"].push(x)})}if(xHistoryH.length!=0){xHistoryH.forEach(function(x){myObject[section][myObject[section].length-1]["historyH"].push(x)})}}else{alert("\u0646\u0633\u064A\u062A \u062A\u0643\u062A\u0628 \u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0641\u0649 \u0623\u0643\u0645\u0644  ".concat(i," : ").concat(section));return 0}}else if(funFilterInputs(arrayEditorData[i]).includes("**")){if(section!=""){if(dealingWith=="complete"){var getAnswer=myObject[section][myObject[section].length-1]["answer"];var getAnswers=myObject[section][myObject[section].length-1]["answers"];if(getAnswer==""){var getQuestion=myObject[section][myObject[section].length-1]["question"];var getAnswer2=funFilterInputs(arrayEditorData[i]).replace(/\*/g,"");var xHistoryM=funForSortAgeM(getAnswer2);var xHistoryH=funForSortAgeH(getAnswer2);var xHistory2M=funForSortAge2M(getQuestion,getAnswer2);var xHistory2H=funForSortAge2H(getQuestion,getAnswer2);myObject[section][myObject[section].length-1]["answer"]=getAnswer2;if(xHistoryM.length!=0){xHistoryM.forEach(function(x){myObject[section][myObject[section].length-1]["historyM"].push(x)})}if(xHistoryH.length!=0){xHistoryM.forEach(function(x){myObject[section][myObject[section].length-1]["historyH"].push(x)})}if(xHistory2M.length!=0){xHistoryM.forEach(function(x){myObject[section][myObject[section].length-1]["historyM"].push(x)})}if(xHistory2H.length!=0){xHistoryM.forEach(function(x){myObject[section][myObject[section].length-1]["historyH"].push(x)})}getAnswers.push(getAnswer2)}else{alert("error:answer is not empty and i can't input ** \n ".concat(i," \n ").concat(getAnswer," \n  ").concat(theQuestion," "));return 0}}else{alert("error:dealingwith is not complete in ** \n ".concat(i,":").concat(dealingWith));var x=myCodeMirror.getLineNumber(i);return 0}}else{alert("\u0627\u0632\u0627\u0649 \u0645\u0641\u064A\u0634 \u0639\u0646\u0648\u0627\u0646 \u0648\u0641\u0649  ** \n ".concat(i," : ").concat(section));return 0}}else{if(section!=""){var getTheUniqId=myObject[section][myObject[section].length-1];if(dealingWith=="complete"){getTheUniqId["answers"].push(funFilterInputs(arrayEditorData[i]))}else if(dealingWith=="trueOrFalse"){if(getTheUniqId["note"]==""){if(getTheUniqId["answer"]=="\u0635\u062D"){getTheUniqId["note"]=funFilterInputs(arrayEditorData[i]);var xHistoryM=funForSortAgeM(funFilterInputs(arrayEditorData[i]));var xHistoryH=funForSortAgeH(funFilterInputs(arrayEditorData[i]));if(xHistoryM.length!=0){if(getTheUniqId["historyM"].length==1&&xHistoryM.length==1){getTheUniqId["historyM"]=xHistoryM}else{xHistoryM.forEach(function(x){getTheUniqId["historyM"].push(x)})}}if(xHistoryH.length!=0){if(getTheUniqId["historyH"].length==1&&xHistoryH.length==1){getTheUniqId["historyH"]=xHistoryH}else{xHistoryH.forEach(function(x){getTheUniqId["historyH"].push(x)})}}getTheUniqId["answer"]="\u062E\u0637\u0623"}else{alert("answers is not default true \n getTheUniqId[answer]\" : ".concat(getTheUniqId[answer]));return 0}}else{alert("note is not empty \n ".concat(i," : ").concat(getTheUniqId["note"]," "));return 0}}else{alert("dealingWith is not complete and trueOrFalse \n ".concat(i," : ").concat(dealingWith));return 0}}}}}function funUploadQuestions2(para1,myObject){if($("#academicYear").val()==""||$("#subject").val()==""){alert("\u0627\u0643\u062A\u0628 \u0627\u0644\u0633\u0646\u0647 \u0627\u0644\u062F\u0631\u0627\u0633\u064A\u0629 \u0648\u0627\u0644\u0639\u0646\u0648\u0627\u0646 \u0635\u062D");return 0}else{if(para1==0){for(var object in myObject){firebase.database().ref("student/"+$("#academicYear").val()+"/"+$("#subject").val()+"/"+object).update(myObject[object])}}else if(para1==1){for(var object in myObject){firebase.database().ref("student/"+$("#academicYear").val()+"/"+$("#subject").val()+"/"+object).set(myObject[object])}}else if(para1==3){firebase.database().ref("student/"+$("#academicYear").val()+"/"+$("#subject").val()).remove();for(var object in myObject){firebase.database().ref("student/"+$("#academicYear").val()+"/"+$("#subject").val()+"/"+object).set(myObject[object])}}}}